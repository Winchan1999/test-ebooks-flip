<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Flipbook Viewer</title>
<style>
  html,body {
    margin:0; padding:0;
    width:100%; height:100%;
    background:#0b0f1a;
    overflow:hidden;
    display:flex; justify-content:center; align-items:center;
    touch-action:none;
  }

  #flipbook {
    width:90vw;
    height:70vh;
    box-shadow:0 0 25px rgba(0,0,0,0.5);
    transition:transform 0.25s ease;
    border-radius:6px;
  }

  .page {
    background:#fff;
    width:50%;
    height:100%;
    box-shadow:inset 0 0 20px rgba(0,0,0,0.2);
    user-select:none;
  }

  .page img {
    width:100%;
    height:100%;
    object-fit:contain;
    display:block;
    pointer-events:none;
  }

  /* Toolbar */
  .toolbar {
    position:fixed;
    bottom:1rem;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    gap:0.8rem;
    z-index:999;
    background:rgba(15,23,42,0.45);
    padding:6px 12px;
    border-radius:24px;
    backdrop-filter:blur(10px);
    align-items:center;
    transition:opacity 0.4s ease;
  }

  .toolbar.hide {
    opacity:0; pointer-events:none;
  }

  .toolbar button {
    border:none;
    background:rgba(255,255,255,0.15);
    color:#fff;
    font-weight:600;
    padding:8px 12px;
    border-radius:50%;
    cursor:pointer;
    font-size:16px;
    transition:background 0.2s ease;
  }

  .toolbar button:hover { background:rgba(255,255,255,0.3); }

  .toolbar span {
    color:#fff;
    font-size:13px;
    min-width:70px;
    text-align:center;
  }

  @media (max-width:768px){
    #flipbook {width:100vw;height:85vh;box-shadow:none;}
    .page{width:100%;box-shadow:none;}
    .toolbar{gap:0.6rem;padding:4px 8px;bottom:0.5rem;}
    .toolbar button{font-size:15px;padding:6px 10px;}
  }
</style>
</head>
<body>
  <div id="flipbook">
      <div class="page"><img src="pages/1.jpg" alt="Trang 1"></div>
      <div class="page"><img src="pages/2.jpg" alt="Trang 2"></div>
      <div class="page"><img src="pages/3.jpg" alt="Trang 3"></div>
      <div class="page"><img src="pages/4.jpg" alt="Trang 4"></div>
      <div class="page"><img src="pages/5.jpg" alt="Trang 5"></div>
      <div class="page"><img src="pages/6.jpg" alt="Trang 6"></div>
      <div class="page"><img src="pages/7.jpg" alt="Trang 7"></div>
      <div class="page"><img src="pages/8.jpg" alt="Trang 8"></div>
      <div class="page"><img src="pages/9.jpg" alt="Trang 9"></div>
      <div class="page"><img src="pages/10.jpg" alt="Trang 10"></div>
      <div class="page"><img src="pages/11.jpg" alt="Trang 11"></div>
      <div class="page"><img src="pages/12.jpg" alt="Trang 12"></div>
      <div class="page"><img src="pages/13.jpg" alt="Trang 13"></div>
      <div class="page"><img src="pages/14.jpg" alt="Trang 14"></div>
      <div class="page"><img src="pages/15.jpg" alt="Trang 15"></div>
      <div class="page"><img src="pages/16.jpg" alt="Trang 16"></div>
      <div class="page"><img src="pages/17.jpg" alt="Trang 17"></div>
      <div class="page"><img src="pages/18.jpg" alt="Trang 18"></div>
      <div class="page"><img src="pages/19.jpg" alt="Trang 19"></div>
      <div class="page"><img src="pages/20.jpg" alt="Trang 20"></div>
      <div class="page"><img src="pages/21.jpg" alt="Trang 21"></div>
      <div class="page"><img src="pages/22.jpg" alt="Trang 22"></div>
      <div class="page"><img src="pages/23.jpg" alt="Trang 23"></div>
      <div class="page"><img src="pages/24.jpg" alt="Trang 24"></div>
      <div class="page"><img src="pages/25.jpg" alt="Trang 25"></div>
      <div class="page"><img src="pages/26.jpg" alt="Trang 26"></div>
      <div class="page"><img src="pages/27.jpg" alt="Trang 27"></div>
      <div class="page"><img src="pages/28.jpg" alt="Trang 28"></div></div>

  <div class="toolbar" id="toolbar">
    <button onclick="flipPrev()">‚üµ</button>
    <span id="pageLabel">1 / 28</span>
    <button onclick="flipNext()">‚ü∂</button>
    <button onclick="toggleFS()">‚õ∂</button>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/blasten/turn.js/turn.min.js"></script>
  <script>
    let book, total=28;
    let startX=0, currentX=0, dragging=false;

    $(function(){
      book = $('#flipbook');
      book.turn({
        width:'100%',
        height:'100%',
        display: window.innerWidth < 768 ? 'single' : 'double',
        autoCenter:true,
        acceleration:true,
        gradients:true,
        elevation:60,
        duration:1000
      });

      updateLabel();
      book.bind('turned', function(e, page){updateLabel(page);});
      window.addEventListener('resize', () => {
        const mode = window.innerWidth < 768 ? 'single' : 'double';
        book.turn('display', mode);
      });

      setupGestures();
      autoHideToolbar();
    });

    function updateLabel(p){
      const page = p || book.turn('page');
      document.getElementById('pageLabel').textContent = page + ' / ' + total;
    }
    function flipPrev(){book.turn('previous');}
    function flipNext(){book.turn('next');}
    function toggleFS(){
      if(!document.fullscreenElement)
        document.documentElement.requestFullscreen();
      else document.exitFullscreen();
    }

    // üñ± Vu·ªët tay ho·∫∑c k√©o chu·ªôt
    function setupGestures(){
      const area = document.getElementById('flipbook');

      const start = (x)=>{ startX=x; currentX=x; dragging=true; };
      const move  = (x)=>{
        if(!dragging) return;
        currentX=x;
        const delta = currentX - startX;
        book.css('transform', 'translateX('+(delta*0.05)+'px)');
      };
      const end = ()=>{
        if(!dragging) return;
        const delta = currentX - startX;
        dragging=false;
        book.css('transform','translateX(0)');
        if(delta > 60) flipPrev();
        else if(delta < -60) flipNext();
      };

      // Mouse
      area.addEventListener('mousedown', e => start(e.clientX));
      area.addEventListener('mousemove', e => move(e.clientX));
      area.addEventListener('mouseup', end);
      area.addEventListener('mouseleave', end);

      // Touch
      area.addEventListener('touchstart', e => start(e.touches[0].clientX));
      area.addEventListener('touchmove', e => move(e.touches[0].clientX));
      area.addEventListener('touchend', e => end());
    }

    // ·∫®n/hi·ªán toolbar
    function autoHideToolbar(){
      const tb=document.getElementById('toolbar');
      let timer=null;
      const show=()=>{tb.classList.remove('hide');clearTimeout(timer);timer=setTimeout(()=>tb.classList.add('hide'),2500);};
      document.addEventListener('mousemove',show);
      document.addEventListener('touchstart',show);
      show();
    }
  </script>
</body>
</html>